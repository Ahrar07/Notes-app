<!DOCTYPE html>
<html>
<head>
  <title>Speech Test</title>
</head>
<body>
  <h2>Speech to Text Test</h2>
  <textarea id="note-input" rows="5" cols="50" placeholder="Speak here..."></textarea><br>
  <button id="start-recording">ðŸŽ¤ Start Recording</button>
  <button id="stop-recording" style="display: none;">ðŸ›‘ Stop Recording</button>

  <script>
    const startBtn = document.getElementById("start-recording");
    const stopBtn = document.getElementById("stop-recording");
    const noteInput = document.getElementById("note-input");

    let recognition;
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition = new SpeechRecognition();
      recognition.continuous = true;
      recognition.interimResults = true;
      recognition.lang = 'en-US';

      recognition.onresult = (event) => {
        let transcript = '';
        for (let i = event.resultIndex; i < event.results.length; ++i) {
          transcript += event.results[i][0].transcript;
        }
        noteInput.value = transcript;
      };

      recognition.onerror = (event) => {
        console.error("Speech recognition error:", event.error);
      };
    } else {
      alert("Speech Recognition API not supported in this browser.");
    }

    startBtn.addEventListener("click", () => {
      console.log("Start clicked");
      if (recognition) {
        recognition.start();
        startBtn.style.display = "none";
        stopBtn.style.display = "inline";
      }
    });

    stopBtn.addEventListener("click", () => {
      if (recognition) {
        recognition.stop();
        stopBtn.style.display = "none";
        startBtn.style.display = "inline";
      }
    });
  </script>
</body>
</html>
